"use strict";(self.webpackChunkascii_ui=self.webpackChunkascii_ui||[]).push([[799],{2020:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"hooks/use-function-registry","title":"useFunctionRegistry [experimental]","description":"Register Lua functions in a global registry for later invocation within ascii-ui components.","source":"@site/docs/hooks/use_function_registry.md","sourceDirName":"hooks","slug":"/hooks/use-function-registry","permalink":"/ascii-ui-docs/docs/hooks/use-function-registry","draft":false,"unlisted":false,"editUrl":"https://github.com/rcasia/ascii-ui-docs/edit/main/docs/hooks/use_function_registry.md","tags":[{"inline":true,"label":"api","permalink":"/ascii-ui-docs/docs/tags/api"},{"inline":true,"label":"hooks","permalink":"/ascii-ui-docs/docs/tags/hooks"},{"inline":true,"label":"registry","permalink":"/ascii-ui-docs/docs/tags/registry"},{"inline":true,"label":"callbacks","permalink":"/ascii-ui-docs/docs/tags/callbacks"},{"inline":true,"label":"experimental","permalink":"/ascii-ui-docs/docs/tags/experimental"}],"version":"current","frontMatter":{"id":"use-function-registry","title":"useFunctionRegistry [experimental]","sidebar_label":"useFunctionRegistry [experimental]","description":"Register Lua functions in a global registry for later invocation within ascii-ui components.","tags":["api","hooks","registry","callbacks","experimental"]},"sidebar":"tutorialSidebar","previous":{"title":"useEffect","permalink":"/ascii-ui-docs/docs/hooks/use-effect"},"next":{"title":"useInterval","permalink":"/ascii-ui-docs/docs/hooks/use-interval"}}');var t=s(4848),r=s(8453);const o={id:"use-function-registry",title:"useFunctionRegistry [experimental]",sidebar_label:"useFunctionRegistry [experimental]",description:"Register Lua functions in a global registry for later invocation within ascii-ui components.",tags:["api","hooks","registry","callbacks","experimental"]},c="useFunctionRegistry [experimental]",a={},l=[{value:"Reference",id:"reference",level:2},{value:"<code>useFunctionRegistry(fn)</code>",id:"usefunctionregistryfn",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Returns",id:"returns",level:3},{value:"Usage",id:"usage",level:2},{value:"Example: Registering a Callback for XML Components",id:"example-registering-a-callback-for-xml-components",level:3}];function u(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"usefunctionregistry-experimental",children:"useFunctionRegistry [experimental]"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"useFunctionRegistry"})," lets you ",(0,t.jsx)(n.strong,{children:"register a Lua function"})," in a global registry and returns a ",(0,t.jsx)(n.strong,{children:"string key reference"}),".",(0,t.jsx)(n.br,{}),"\n","This reference can be used inside component markup (e.g. ",(0,t.jsx)(n.code,{children:"on_press = ref"}),") to invoke the function later through the ascii-ui runtime."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"local ref = ui.hooks.useFunctionRegistry(fn)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,t.jsx)(n.h3,{id:"usefunctionregistryfn",children:(0,t.jsx)(n.code,{children:"useFunctionRegistry(fn)"})}),"\n",(0,t.jsxs)(n.p,{children:["Call ",(0,t.jsx)(n.code,{children:"useFunctionRegistry"})," at the top level of a component to register a ",(0,t.jsx)(n.strong,{children:"Lua function"})," globally and obtain a ",(0,t.jsx)(n.strong,{children:"string reference"})," for it."]}),"\n",(0,t.jsxs)(n.p,{children:["This is useful when you need to attach callbacks (like ",(0,t.jsx)(n.code,{children:"on_press"}),") to UI components that are rendered as markup or resolved later by the runtime."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'local ref = ui.hooks.useFunctionRegistry(function()\n  print("Button pressed!")\nend)\n'})}),"\n",(0,t.jsx)(n.p,{children:"You can then pass the returned ref string to a component prop:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'ui.components.Button({ label = "Click Me", on_press = ref })\n'})}),"\n",(0,t.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"fn"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"function"})}),(0,t.jsxs)(n.td,{children:["The Lua function to register in the ",(0,t.jsx)(n.strong,{children:"global function registry"}),". This function can later be invoked indirectly through its string reference."]})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"returns",children:"Returns"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"useFunctionRegistry"})," returns a ",(0,t.jsx)(n.strong,{children:"string reference"})," to the registered function."]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"reference"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsxs)(n.td,{children:["A unique string key that identifies the registered function. You can pass this key to UI component props (e.g. ",(0,t.jsx)(n.code,{children:"on_press = reference"}),") so the ascii-ui runtime can invoke the original function later."]})]})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(n.h3,{id:"example-registering-a-callback-for-xml-components",children:"Example: Registering a Callback for XML Components"}),"\n",(0,t.jsxs)(n.p,{children:["When rendering ",(0,t.jsx)(n.strong,{children:"XML-based components"})," or markup strings, you can\u2019t pass a Lua function directly.",(0,t.jsx)(n.br,{}),"\n","Instead, use ",(0,t.jsx)(n.code,{children:"useFunctionRegistry"})," to register the function globally and pass a ",(0,t.jsx)(n.strong,{children:"string reference"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'local ui = require("ascii-ui")\nlocal useFunctionRegistry = ui.hooks.useFunctionRegistry\n\nlocal MyComponent = ui.createComponent("MyComponent", function()\n  local onPressRef = useFunctionRegistry(function()\n    print("Button pressed!")\n  end)\n\n  return ([[\n    <Button label="Press Me" on_press="%s" />\n  ]]):format(onPressRef)\nend)\n\nreturn MyComponent\n'})}),"\n",(0,t.jsx)(n.p,{children:"Each time the user interacts with the XML-rendered button,\nthe ascii-ui runtime uses the string key (onPressRef) to look up and call the registered function."})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var i=s(6540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);